<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RMS</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="applicant-details.component.css">
</head>
<body>
    
  
    <!-- Left Sidebar Menu -->
    <aside class="sidebar">

        <!-- Logo Section -->
        <div class="logo-section">
            <img src="https://waseel.s3.amazonaws.com/Waseel+New+logo.png" alt="Waseel Logo" class="logo" />
        </div>
        
        <!-- Navigation Links -->
        <ul class="nav-links">
          <li><a href="/api/dashboard">Home</a></li>
      </ul>

        <!-- User Info and Logout at the end of the sidebar -->
        <div class="sidebar-footer">
            <span class="user-info">
                <img src="https://waseel.s3.amazonaws.com/UserIcon.png" alt="User Avatar" class="user-avatar">
                {{ firstName }} {{ lastName }}
            </span>
            <button (click)="logout()">Logout</button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

      <button (click)="generatePDF()">Download Applicant Details as PDF</button>

        
    <div *ngIf="applicant">

        <div *ngIf="applicant">
            <!-- Personal Details -->
            <div class="card">
              <h2>Personal Details</h2>
              <p><strong>Name:</strong> {{ applicant.fullName }}</p>
              <p><strong>Nationality:</strong> {{ applicant.nationality }}</p>
              <p><strong>Gender:</strong> {{ applicant.gender }}</p>
              <p><strong>Blood Type:</strong> {{ applicant.bloodType }}</p>
              <p><strong>Marital Status:</strong> {{ applicant.martialStatus }}</p>
            </div>
          
            <!-- Address Details -->
            <div class="card" *ngIf="address">
              <h2>Address</h2>
              <p><strong>Address Line:</strong> {{ address.addressLine }}</p>
              <p><strong>Country:</strong> {{ address.country }}</p>
              <p><strong>City:</strong> {{ address.city }}</p>
              <p><strong>Zip Code:</strong> {{ address.zipCode }}</p>
              <p><strong>Additional Code:</strong> {{ address.additionalCode }}</p>
              <p><strong>Mobile Number:</strong> {{ address.mobileNumber }}</p>
              <p><strong>Email:</strong> {{ address.emailAddress }}</p>
            </div>
        
            <!-- National Identity -->
            <div class="card" *ngIf="nationalIdentity">
              <h2>National Identity</h2>
              <p><strong>ID:</strong> {{ nationalIdentity.idNumber }}</p>
              <p><strong>Expiry Date:</strong> {{ nationalIdentity.expiryDate }}</p>
              <p><strong>Place of Issue:</strong> {{ nationalIdentity.placeOfIssue }}</p>
              <p><strong>Date of Birth:</strong> {{ nationalIdentity.dateOfBirth }}</p>
              <p><strong>Place of Birth:</strong> {{ nationalIdentity.placeOfBirth }}</p>
            </div>
          
            <!-- Attachments -->
            <div class="card" *ngIf="attachments && attachments.length">
              <h2>Attachments</h2>
              <table>
                  <thead>
                      <tr>
                          <th>Attachment Type</th>
                          <th>File Name</th>
                          <th>Action</th>
                      </tr>
                  </thead>
                  <tbody>
                      <ng-container *ngFor="let attachment of attachments; let i = index">
                          <tr>
                              <td>{{ getAttachmentType(i) }}</td>
                              <td>{{ attachment.fileName }}</td>
                              <td>
                                  <button (click)="onDownloadFile(attachment.attachment_id, attachment.fileName)">Download</button>
                              </td>
                          </tr>
                      </ng-container>
                  </tbody>
              </table>
            </div>

   
            <!-- Dependencies -->
            <div class="card" *ngIf="dependencies && dependencies.length">
              <h2>Dependencies</h2>
              <table>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Kinship</th>
                    <th>Date of Birth</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let dependency of dependencies">
                    <td>{{ dependency.name }}</td>
                    <td>{{ dependency.kinship }}</td>
                    <td>{{ dependency.dateOfBirth }}</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Emergency Contacts -->
            <div class="card" *ngIf="emergencyContacts && emergencyContacts.length">
              <h2>Emergency Contacts</h2>
              <table>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Kinship</th>
                    <th>Phone Number</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let contact of emergencyContacts">
                    <td>{{ contact.name }}</td>
                    <td>{{ contact.kinship }}</td>
                    <td>{{ contact.phoneNumber }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
        </div>
        
      
      </div>
    </main>
      
</body>
</html>